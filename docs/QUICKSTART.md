# 🚀 빠른 시작 가이드

이 가이드를 따라 5분 안에 화상인증 시스템을 시작할 수 있습니다!

## 전제 조건

- Ubuntu 20.04 / 22.04
- Node.js 18+ 설치됨
- 인터넷 연결

## 단계별 가이드

### 1️⃣ 프로젝트 준비

```bash
# 프로젝트 디렉토리로 이동
cd /home/user/webapp

# 파일 확인
ls -la
```

### 2️⃣ 의존성 설치

```bash
# Node.js 패키지 설치
npm install
```

출력:
```
added 112 packages in 20s
✅ 설치 완료!
```

### 3️⃣ SSL 인증서 생성

```bash
# 개발용 자체 서명 인증서 생성
bash scripts/generate_certs.sh
```

출력:
```
========================================
개발용 SSL 인증서 생성
========================================
🔐 자체 서명 인증서 생성 중...
✅ 인증서 생성 완료!
```

### 4️⃣ 환경 설정

```bash
# .env 파일 생성
cp .env.example .env

# (선택사항) 공인 IP 설정
# nano .env
```

기본 설정으로도 로컬 테스트가 가능합니다!

### 5️⃣ 서버 시작

```bash
# 개발 서버 시작
npm run dev
```

출력:
```
╔════════════════════════════════════════════════════════════╗
║                                                            ║
║   금융권 TCP 화상인증 시스템 (Janus WebRTC)                ║
║                                                            ║
║   서버 주소: https://localhost:3000                        
║   시그널링: wss://localhost:3000                          
║                                                            ║
║   상태: 실행 중 ✅                                          ║
║                                                            ║
╚════════════════════════════════════════════════════════════╝

🚀 준비 완료! 브라우저에서 접속하세요.
```

### 6️⃣ 브라우저에서 접속

1. **브라우저 열기**
   - Chrome, Firefox, Edge 등

2. **주소 입력**
   ```
   https://localhost:3000
   ```

3. **인증서 경고 무시**
   - "고급" 클릭
   - "localhost(으)로 계속 진행" 클릭
   
   ⚠️ 자체 서명 인증서이기 때문에 정상적인 경고입니다.

4. **화면 확인**
   
   다음과 같은 화면이 보이면 성공! 🎉
   
   ```
   ┌─────────────────────────────────┐
   │  금융권 화상인증 시스템          │
   │                                 │
   │  [👤 고객]    [👨‍💼 상담원]      │
   └─────────────────────────────────┘
   ```

## 🧪 테스트하기

### 로컬에서 1:1 통화 테스트

#### 준비물
- 브라우저 창 2개 (또는 브라우저 2개)
- 웹캠과 마이크

#### 테스트 순서

1. **첫 번째 창 - 고객**
   ```
   1. https://localhost:3000 접속
   2. "고객" 역할 선택
   3. 방 번호: 1234 입력
   4. 이름: 김고객 입력
   5. "입장하기" 클릭
   6. 카메라/마이크 권한 허용
   ```

2. **두 번째 창 - 상담원**
   ```
   1. https://localhost:3000 접속 (새 탭)
   2. "상담원" 역할 선택
   3. 방 번호: 1234 입력 (동일!)
   4. 이름: 이상담 입력
   5. "입장하기" 클릭
   6. 카메라/마이크 권한 허용
   ```

3. **통화 확인**
   - 양쪽 화면에 상대방 영상이 보이면 성공! ✅
   - 마이크/카메라 버튼으로 ON/OFF 테스트
   - 통화 시간 카운터 확인

4. **통화 종료**
   - "통화 종료" 버튼 클릭
   - 종료 화면 확인

## 📱 모바일 테스트

같은 네트워크에 있는 모바일 기기에서:

1. **서버 IP 확인**
   ```bash
   # 로컬 IP 확인
   hostname -I
   # 예: 192.168.1.100
   ```

2. **모바일 브라우저에서 접속**
   ```
   https://192.168.1.100:3000
   ```

3. **인증서 경고 무시하고 진행**

## 🐛 문제 해결

### 서버가 시작되지 않음

**오류**: `EADDRINUSE: address already in use`

**해결**:
```bash
# 3000 포트 사용 프로세스 확인
lsof -i :3000

# 프로세스 종료
kill -9 <PID>
```

### 카메라/마이크 권한 오류

**증상**: "Permission denied" 또는 권한 요청이 안 뜸

**해결**:
1. **HTTPS 연결 확인**
   - HTTP는 불가, HTTPS 필수!
   - 주소가 `https://`로 시작하는지 확인

2. **브라우저 설정**
   - Chrome: 설정 > 개인정보 보호 및 보안 > 사이트 설정
   - Firefox: 설정 > 개인정보 및 보안 > 권한

3. **다른 앱 확인**
   - Zoom, Skype 등이 카메라를 사용 중인지 확인

### 비디오가 보이지 않음

**증상**: 로컬 비디오는 보이지만 원격 비디오가 안 보임

**원인**: WebRTC 연결 실패

**해결**:
```bash
# 브라우저 콘솔(F12)에서 오류 확인
# 일반적으로 로컬 테스트에서는 발생하지 않음

# 로그 확인
# 서버 콘솔에서 연결 메시지 확인
```

### 인증서 경고가 계속 뜸

**증상**: "이 사이트의 연결이 안전하지 않습니다" 반복

**해결**:
1. **개발 환경**
   - 경고 무시하고 "계속 진행" 선택
   - 자체 서명 인증서는 정상적인 경고임

2. **프로덕션 환경**
   - Let's Encrypt 사용
   ```bash
   sudo apt install certbot
   sudo certbot certonly --standalone -d your-domain.com
   ```

## 🎯 다음 단계

시스템이 정상 작동한다면:

### 1. 실제 Janus 설치 (선택사항)

현재는 클라이언트만 작동합니다. 실제 WebRTC 서버를 원하면:

```bash
# Janus 의존성 설치
sudo bash scripts/install_dependencies.sh

# libnice 설치
bash scripts/install_libnice.sh

# Janus 설치
bash scripts/install_janus.sh

# Janus 설정
bash scripts/setup_janus.sh

# Janus 시작
bash scripts/start_janus.sh
```

### 2. 프로덕션 배포

- [설치 가이드](INSTALL.md) 전체 읽기
- 공인 SSL 인증서 설정
- 방화벽 포트 오픈
- systemd 서비스 등록

### 3. 커스터마이징

- `client/styles.css` - 디자인 변경
- `janus-config/*.jcfg` - Janus 설정 조정
- `.env` - 환경 변수 변경

## 📚 추가 문서

- [📖 전체 설치 가이드](INSTALL.md)
- [📘 사용자 가이드](USAGE.md)
- [🔐 보안 가이드](SECURITY.md)
- [🐛 문제 해결](TROUBLESHOOTING.md)

## 💡 팁

### 개발 시 자동 재시작

```bash
# nodemon 설치
npm install -g nodemon

# 자동 재시작 모드로 실행
nodemon server/index.js
```

### 로그 모니터링

```bash
# 실시간 로그 확인
tail -f logs/*.log

# Janus 로그 (설치한 경우)
tail -f logs/janus.log
```

### 녹화 파일 확인

```bash
# 녹화 디렉토리 확인
ls -lh recordings/

# API로 조회
curl -k https://localhost:3000/api/recordings
```

## ❓ 도움이 필요하신가요?

1. **README.md** - 전체 개요
2. **docs/INSTALL.md** - 상세 설치
3. **이슈 트래커** - 버그 리포트
4. **로그 파일** - 디버깅 정보

---

**🎉 축하합니다!**

화상인증 시스템을 성공적으로 시작했습니다.
이제 금융권 수준의 화상 인증 서비스를 제공할 수 있습니다!
